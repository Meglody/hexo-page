<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="å¡è¥¿çŒ«å€’"><meta name="copyright" content="å¡è¥¿çŒ«å€’"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ | å¡è¥¿çŒ«å€’çš„å°ç«™</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#6200ee"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"meglody.github.io","root":"/","title":"å¡è¥¿çŒ«å€’çš„å°ç«™","version":"1.7.0","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg"};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="stylesheet" href="/css/markdown-mine.css"><link rel="stylesheet" href="/css/markdown-meglody.css"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-DBJ06R3DVX"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DBJ06R3DVX');
}</script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="äº†è§£å¤§å‹æ¡†æ¶è¦ä»è¯»æºç å¼€å§‹ã€‚ äº†è§£æºç è®¾è®¡ä¸å®ç°æ€æƒ³è¦ä»æ¡†æ¶çš„è®¾è®¡å’Œå‚ä¸è€…çš„ä¹¦æœ¬å¼€å§‹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ">
<meta property="og:url" content="https://meglody.github.io/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/index.html">
<meta property="og:site_name" content="å¡è¥¿çŒ«å€’çš„å°ç«™">
<meta property="og:description" content="äº†è§£å¤§å‹æ¡†æ¶è¦ä»è¯»æºç å¼€å§‹ã€‚ äº†è§£æºç è®¾è®¡ä¸å®ç°æ€æƒ³è¦ä»æ¡†æ¶çš„è®¾è®¡å’Œå‚ä¸è€…çš„ä¹¦æœ¬å¼€å§‹ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-02-20T02:04:23.000Z">
<meta property="article:modified_time" content="2022-02-22T03:06:13.000Z">
<meta property="article:author" content="å¡è¥¿çŒ«å€’">
<meta property="article:tag" content="æ¶æ„">
<meta property="article:tag" content="vue">
<meta property="article:tag" content="ç¼–è¯‘">
<meta property="article:tag" content="js">
<meta property="article:tag" content="è™šæ‹ŸDOM">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><canvas id="trianglifyContainer"></canvas><script defer src="https://cdn.jsdelivr.net/npm/trianglify@4/dist/trianglify.bundle.js"></script><script>document.addEventListener("DOMContentLoaded", () => {
  const pattern = trianglify({
    width: 800,
    height: 600,
    cellSize: 75,
    palette: ["YlGnBu", "GnBu", "Purples", "Blues"],
  });
  const canvasOpts = {
    applyCssScaling: false
  }
  document.body.appendChild(pattern.toCanvas(trianglifyContainer, canvasOpts));
});</script><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å¡è¥¿çŒ«å€’"><img width="96" loading="lazy" src="https://shanghai-1309153523.cos.ap-shanghai.myqcloud.com/blogImage/avatar2.jpeg" alt="å¡è¥¿çŒ«å€’"><span class="site-author-status" title="å­¦ä¹ ä¸­">ğŸ±â€ğŸ‰</span></a><div class="site-author-name"><a href="/about/">å¡è¥¿çŒ«å€’</a></div><span class="site-name">å¡è¥¿çŒ«å€’çš„å°ç«™</span><sub class="site-subtitle">è¿‡å¾€ä¸€ç¬ï¼ŒçŸ¥å·±è€…å¯¥æ•°ï¼Œå–„å·±è€…æ–¹èƒ½å‡ ä½•ï¼Ÿå‹¿å¿˜åˆå¿ƒï¼Œçæƒœç°åœ¨ï¼Œéšé‡è€Œå®‰ï¼Œå²æœˆé™å¥½ã€‚</sub><div class="site-desciption">å¥½å­¦å‰ç«¯ï¼Œå–œæ¬¢ç ”ç©¶å·¥ç¨‹åŒ–/éƒ¨ç½²è¿ç»´ï¼ŒTSï¼ŒWebGLï¼Œç›®å‰å­¦ä¹ WebGLã€Reactã€å…ƒæ•°æ®å’Œæ¶æ„</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">11</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">4</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">30</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="Yunä¸»é¢˜æ–‡æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=30755703&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Meglody" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:30755703@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=260476301" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/453065" title="å“”å“©å“”å“©åŠ¨ç”»" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AF%87-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88"><span class="toc-number">1.</span> <span class="toc-text">ç¬¬ä¸€ç¯‡ æ¡†æ¶è®¾è®¡æ¦‚è§ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%9D%83%E8%A1%A1%E7%9A%84%E8%89%BA%E6%9C%AF"><span class="toc-number">1.1.</span> <span class="toc-text">ç¬¬ä¸€ç«  æƒè¡¡çš„è‰ºæœ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%BC%8F%E4%B8%8E%E5%A3%B0%E6%98%8E%E5%BC%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">å‘½ä»¤å¼ä¸å£°æ˜å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E5%92%8C%E7%BC%96%E8%AF%91%E6%97%B6%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%EF%BC%9A"><span class="toc-number">1.1.2.</span> <span class="toc-text">è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„ç›¸å…³çŸ¥è¯†ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%AF%E8%BF%90%E8%A1%8C%E6%97%B6"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">çº¯è¿è¡Œæ—¶:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%97%B6-%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%9A"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">ç¼–è¯‘æ—¶ + è¿è¡Œæ—¶ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%AF%E7%BC%96%E8%AF%91%E6%97%B6%EF%BC%9A"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">çº¯ç¼–è¯‘æ—¶ï¼š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%A0%B8%E5%BF%83%E8%A6%81%E7%B4%A0"><span class="toc-number">1.2.</span> <span class="toc-text">ç¬¬äºŒç«  æ¡†æ¶è®¾è®¡çš„æ ¸å¿ƒè¦ç´ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C"><span class="toc-number">1.2.1.</span> <span class="toc-text">æå‡å¼€å‘ä½“éªŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BD%93%E7%A7%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ§åˆ¶æ¡†æ¶çš„ä½“ç§¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E8%A6%81%E5%81%9A%E5%88%B0%E8%89%AF%E5%A5%BD%E7%9A%84-Tree-Shaking"><span class="toc-number">1.2.3.</span> <span class="toc-text">æ¡†æ¶è¦åšåˆ°è‰¯å¥½çš„ Tree-Shaking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E5%BA%94%E8%AF%A5%E8%BE%93%E5%87%BA%E6%80%8E%E6%A0%B7%E7%9A%84%E6%9E%84%E5%BB%BA%E4%BA%A7%E7%89%A9"><span class="toc-number">1.2.4.</span> <span class="toc-text">æ¡†æ¶åº”è¯¥è¾“å‡ºæ€æ ·çš„æ„å»ºäº§ç‰©</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%80%A7%E5%BC%80%E5%85%B3"><span class="toc-number">1.2.5.</span> <span class="toc-text">ç‰¹æ€§å¼€å…³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%89%AF%E5%A5%BD%E7%9A%84typescript%E6%94%AF%E6%8C%81"><span class="toc-number">1.2.6.</span> <span class="toc-text">è‰¯å¥½çš„typescriptæ”¯æŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-Vue-js-3-%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">1.3.</span> <span class="toc-text">ç¬¬ä¸‰ç«  Vue.js 3 çš„è®¾è®¡æ€è·¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%9A%84%E6%8F%8F%E8%BF%B0UI"><span class="toc-number">1.3.1.</span> <span class="toc-text">å£°æ˜å¼çš„æè¿°UI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E8%AF%86%E6%B8%B2%E6%9F%93%E5%99%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">åˆè¯†æ¸²æŸ“å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">ç»„ä»¶çš„æœ¬è´¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.4.</span> <span class="toc-text">æ¨¡ç‰ˆå·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue-js-%E6%98%AF%E5%90%84%E4%B8%AA%E6%A8%A1%E5%9D%97%E7%BB%84%E6%88%90%E7%9A%84%E6%9C%89%E6%9C%BA%E6%95%B4%E4%BD%93"><span class="toc-number">1.3.5.</span> <span class="toc-text">Vue.js æ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://meglody.github.io/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å¡è¥¿çŒ«å€’"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å¡è¥¿çŒ«å€’çš„å°ç«™"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ<a class="post-edit-link" href="https://github.com/Meglody/Meglody.github.io/tree/main/source/_posts/read/è¯»ã€ŠVue-jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-02-20 10:04:23" itemprop="dateCreated datePublished" datetime="2022-02-20T10:04:23+08:00">2022-02-20</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <span class="post-meta-icon-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-02-22 11:06:13" itemprop="dateModified" datetime="2022-02-22T11:06:13+08:00">2022-02-22</time></div><span class="leancloud_visitors" id="/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/" data-flag-title="è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ¬¡æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><span class="post-meta-divider">-</span><a href="#comment"><span class="post-meta-item-icon" title="è¯„è®ºæ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-chat-3-line"></use></svg> <span class="waline-comment-count" id="/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/"></span></span></a><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E7%AC%94%E8%AE%B0/" style="--text-color:dimgray" itemprop="url" rel="index"><span itemprop="text">ç¬”è®°</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E6%9E%B6%E6%9E%84/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">æ¶æ„</span></a><a class="tag-item" href="/tags/vue/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">vue</span></a><a class="tag-item" href="/tags/%E7%BC%96%E8%AF%91/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">ç¼–è¯‘</span></a><a class="tag-item" href="/tags/js/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">js</span></a><a class="tag-item" href="/tags/%E8%99%9A%E6%8B%9FDOM/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">è™šæ‹ŸDOM</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><blockquote>
<p>äº†è§£å¤§å‹æ¡†æ¶è¦ä»è¯»æºç å¼€å§‹ã€‚</p>
<p>äº†è§£æºç è®¾è®¡ä¸å®ç°æ€æƒ³è¦ä»æ¡†æ¶çš„è®¾è®¡å’Œå‚ä¸è€…çš„ä¹¦æœ¬å¼€å§‹ã€‚</p>
</blockquote>
<span id="more"></span>

<h1 id="ç¬¬ä¸€ç¯‡-æ¡†æ¶è®¾è®¡æ¦‚è§ˆ"><a href="#ç¬¬ä¸€ç¯‡-æ¡†æ¶è®¾è®¡æ¦‚è§ˆ" class="headerlink" title="ç¬¬ä¸€ç¯‡ æ¡†æ¶è®¾è®¡æ¦‚è§ˆ"></a>ç¬¬ä¸€ç¯‡ æ¡†æ¶è®¾è®¡æ¦‚è§ˆ</h1><h2 id="ç¬¬ä¸€ç« -æƒè¡¡çš„è‰ºæœ¯"><a href="#ç¬¬ä¸€ç« -æƒè¡¡çš„è‰ºæœ¯" class="headerlink" title="ç¬¬ä¸€ç«  æƒè¡¡çš„è‰ºæœ¯"></a>ç¬¬ä¸€ç«  æƒè¡¡çš„è‰ºæœ¯</h2><h3 id="å‘½ä»¤å¼ä¸å£°æ˜å¼"><a href="#å‘½ä»¤å¼ä¸å£°æ˜å¼" class="headerlink" title="å‘½ä»¤å¼ä¸å£°æ˜å¼"></a>å‘½ä»¤å¼ä¸å£°æ˜å¼</h3><p>æœ¬ç« è®¨è®ºäº†å‘½ä»¤å¼å’Œå£°æ˜å¼ä¸¤ç§<code>èŒƒå¼</code>çš„å·®å¼‚ï¼Œä»ç»“æœä¸Šè®²ï¼š</p>
<ul>
<li>å‘½ä»¤å¼æ›´åŠ æ³¨é‡è¿‡ç¨‹ï¼Œæ€§èƒ½é«˜</li>
<li>å£°æ˜å¼æ›´åŠ å…³æ³¨ç»“æœï¼Œæ€§èƒ½å·®</li>
</ul>
<p>å‘½ä»¤å¼åœ¨<code>ç†è®ºä¸Š</code>å¯ä»¥åšåˆ°æè‡´çš„ä¼˜åŒ–ï¼Œä½†æ˜¯ç”¨æˆ·(*åœ¨è¿™é‡Œæ¡†æ¶çš„ç”¨æˆ·æ˜¯å¼€å‘è€…ï¼ŒååŒ)éœ€è¦æ‰¿å—å·¨å¤§çš„å¿ƒæ™ºè´Ÿæ‹…å’Œé«˜é¢ç»´æŠ¤æˆæœ¬ï¼›<br>è€Œå£°æ˜å¼èƒ½å¤Ÿæœ‰æ•ˆçš„å‡å°‘å¿ƒæ™ºè´Ÿæ‹…ï¼Œå¹¶å‡å°‘ç»´æŠ¤æˆæœ¬ï¼Œåœ¨è¿™ä¸ªç”¨äººæ—¢æ˜¯ç”¨é’±çš„ç¤¾ä¼šï¼Œäººæ˜¯ç¬¬ä¸€æˆæœ¬ï¼Œæ—¢æ˜¯å£°æ˜å¼åˆ™è¿è¡Œæ—¶æ€§èƒ½ä¼šæœ‰ä¸€å®šçš„ç‰ºç‰²ï¼›<br>æ¡†æ¶(Vue.js)è®¾è®¡è€…å°±ä»è¿™ä¸€åˆ‡å…¥ç‚¹ï¼Œæƒ³å‡ºåŠæ³•å°†æ€§èƒ½æŸè€—è¿›è¡Œæœ€å°åŒ–ï¼ˆæ³¨æ„ï¼šåœ¨å£°æ˜å¼å°è£…å‘½ä»¤å¼çš„åŸºç¡€ä¸Šï¼Œæ€§èƒ½çš„æŸè€—æ˜¯å¿…ç„¶çš„ï¼Œæ‰€ä»¥VuejsæåŠ›äºå°†æ€§èƒ½æŸè€—é™åˆ°æœ€ä½ï¼‰ï¼›<br>æ‰€ä»¥æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„Vueæ˜¯ä¸€ä¸ªé¢å‘ç”¨æˆ·å£°æ˜å¼ï¼Œåº•å±‚ç”¨å‘½ä»¤å¼å®ç°çš„æ¡†æ¶ã€‚</p>
<p>åœ¨è¿™é‡Œéœæ˜¥é˜³ä¾‹ä¸¾äº†ä¸€ä¸ªå£°æ˜å¼æ›´æ–°çš„æ€§èƒ½æ¶ˆè€—å…¬å¼:</p>
<blockquote>
<p>å£°æ˜å¼æ›´æ–°çš„æ€§èƒ½æ¶ˆè€— = æ‰¾å‡ºå·®å¼‚çš„æ€§èƒ½æ¶ˆè€—(B) + ç›´æ¥ä¿®æ”¹çš„æ€§èƒ½æ¶ˆè€—(A)</p>
</blockquote>
<p>Vuejsä¸­è™šæ‹ŸDOMçš„å­˜åœ¨æ„ä¹‰å°±æ˜¯ä¸ºäº†æè‡´çš„ç¼©å‡Bçš„æ€§èƒ½æ¶ˆè€—ã€‚</p>
<p>éœæ˜¥é˜³å°†åŸç”ŸJSæ“ä½œDOMçš„æ–¹æ³•(createElement)ã€è™šæ‹ŸDOMã€innerHTMLä¸‰è€…è¿›è¡Œäº†æ¯”è¾ƒï¼Œç»“æœå¦‚ä¸‹:</p>
<p>åˆ›å»ºé¡µé¢æ—¶:</p>
<table>
<thead>
<tr>
<th></th>
<th>innerHTML(æ¨¡ç‰ˆ)</th>
<th>è™šæ‹ŸDOM</th>
<th>åŸç”ŸJS</th>
</tr>
</thead>
<tbody><tr>
<td>çº¯JSè¿ç®—</td>
<td>æ¸²æŸ“HTMLå­—ç¬¦ä¸²</td>
<td>åˆ›å»ºæ–°çš„JSå¯¹è±¡</td>
<td>æ— </td>
</tr>
<tr>
<td>DOMè¿ç®—</td>
<td>æ–°å»ºæ‰€æœ‰æ–°DOM</td>
<td>æ–°å»ºæ‰€æœ‰æ–°DOM</td>
<td>æ–°å»ºæ‰€æœ‰æ–°DOM</td>
</tr>
</tbody></table>
<p>æ›´æ–°é¡µé¢æ—¶:</p>
<table>
<thead>
<tr>
<th></th>
<th>innerHTML(æ¨¡ç‰ˆ)</th>
<th>è™šæ‹ŸDOM</th>
<th>åŸç”ŸJS</th>
</tr>
</thead>
<tbody><tr>
<td>çº¯JSè¿ç®—</td>
<td>æ¸²æŸ“HTMLå­—ç¬¦ä¸²</td>
<td>åˆ›å»ºæ–°çš„JSå¯¹è±¡ + Diff</td>
<td>æ— </td>
</tr>
<tr>
<td>DOMè¿ç®—</td>
<td>é”€æ¯æ‰€æœ‰æ—§DOM<br/>æ–°å»ºæ‰€æœ‰æ–°DOM</td>
<td>å¿…è¦çš„DOMæ›´æ–°</td>
<td>å¿…è¦çš„DOMæ›´æ–°</td>
</tr>
<tr>
<td>æ€§èƒ½å› ç´ </td>
<td>ä¸æ¨¡ç‰ˆå¤§å°ç›¸å…³</td>
<td>ä¸æ•°æ®å˜åŒ–é‡ç›¸å…³</td>
<td>ä¸æ•°æ®å˜åŒ–é‡ç›¸å…³</td>
</tr>
</tbody></table>
<p>åŠ ä¸Šä¸¤ä¸ªç»´åº¦ï¼šå¿ƒæ™ºè´Ÿæ‹…ã€å¯ç»´æŠ¤æ€§</p>
<table>
<thead>
<tr>
<th>innerHTML(æ¨¡ç‰ˆ)</th>
<th>è™šæ‹ŸDOM</th>
<th>åŸç”ŸJS</th>
</tr>
</thead>
<tbody><tr>
<td>å¿ƒæ™ºè´Ÿæ‹…ä¸­ç­‰</td>
<td>å¿ƒæ™ºè´Ÿæ‹…å°</td>
<td>å¿ƒæ™ºè´Ÿæ‹…å¤§</td>
</tr>
<tr>
<td>å¯ç»´æŠ¤æ€§ä¸€èˆ¬</td>
<td>å¯ç»´æŠ¤æ€§å¥½</td>
<td>å¯ç»´æŠ¤æ€§å·®</td>
</tr>
<tr>
<td>æ€§èƒ½å·®</td>
<td>æ€§èƒ½ä¸é”™</td>
<td>æ€§èƒ½é«˜</td>
</tr>
</tbody></table>
<p>å¯è§æ¯”è¾ƒä¸æ˜¯ç®€å•çš„ä¸‹å®šè®ºï¼Œè€Œæ˜¯ä¸åˆ›å»ºé¡µé¢/æ›´æ–°é¡µé¢ï¼Œåˆ›å»ºé¡µé¢å¤§å°/å˜æ›´éƒ¨åˆ†å¤§å°ï¼Œæœ‰å…³ç³»ï¼›</p>
<p>æœ€åç»“åˆå¿ƒæ™ºè´Ÿæ‹…å’Œå¯ç»´æŠ¤æ€§ï¼Œå‘ç°è™šæ‹ŸDOMæ˜¯ä¸ªè¿˜ä¸é”™çš„é€‰æ‹©ã€‚</p>
<h3 id="è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„ç›¸å…³çŸ¥è¯†ï¼š"><a href="#è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„ç›¸å…³çŸ¥è¯†ï¼š" class="headerlink" title="è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„ç›¸å…³çŸ¥è¯†ï¼š"></a>è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶çš„ç›¸å…³çŸ¥è¯†ï¼š</h3><h4 id="çº¯è¿è¡Œæ—¶"><a href="#çº¯è¿è¡Œæ—¶" class="headerlink" title="çº¯è¿è¡Œæ—¶:"></a>çº¯è¿è¡Œæ—¶:</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span> tag<span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token string">'hello world'</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">function</span> <span class="token function">Render</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> root</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> children <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
        el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        obj<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=></span> <span class="token function">Render</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
</code></pre>

<p>å¯¹äºç”¨æˆ·æ¥è®²ï¼Œçº¯è¿è¡Œæ—¶éœ€è¦æ‰‹å†™æ ‘å½¢ç»“æ„æ•°æ®ï¼Œå¹¶ä¸”ä¸ç›´è§‚ï¼Œå¿ƒæ™ºè´Ÿæ‹…å’Œç»´æŠ¤æˆæœ¬ä¸ä½ï¼ŒVueä¸­è¿™ä¸ªæ ‘å½¢ç»“æ„å°±æ˜¯è™šæ‹ŸDOMã€‚</p>
<p>ä¸ºäº†æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼ŒVueå¼•å…¥äº†ç¼–è¯‘çš„æ‰‹æ®µï¼Œè¿™ä¹Ÿæ˜¯åœ¨è®¾è®¡Vue.jsæ—¶ï¼ŒVueå›¢é˜Ÿåœ¨ç¼–è¯‘æ—¶ä¸»è¦è€—è´¹ç²¾åŠ›çš„åœ°æ–¹ã€‚</p>
<h4 id="ç¼–è¯‘æ—¶-è¿è¡Œæ—¶ï¼š"><a href="#ç¼–è¯‘æ—¶-è¿è¡Œæ—¶ï¼š" class="headerlink" title="ç¼–è¯‘æ—¶ + è¿è¡Œæ—¶ï¼š"></a>ç¼–è¯‘æ—¶ + è¿è¡Œæ—¶ï¼š</h4><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>ç»è¿‡ç¼–è¯‘ Compile â¬‡</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span> tag<span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token string">'hello world'</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>è¿™ä¸ªç¼–è¯‘æ—¶çš„ç¨‹åºå°±æ˜¯Compilerï¼Œæœ€åç¨‹åºåœ¨ç”¨æˆ·é‚£é‡Œå°±æ˜¯è¿™æ ·å‘ˆç°çš„ï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
&lt;div>
    &lt;span>hello world&lt;/span>
&lt;/div>
</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// è°ƒç”¨Compilerç¼–è¯‘å¾—åˆ°æ ‘å½¢ç»“æ„çš„æ•°æ®å¯¹è±¡</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">Compile</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
<span class="token comment">// è°ƒç”¨renderè¿›è¡Œæ¸²æŸ“</span>
<span class="token function">Render</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span></code></pre>

<h4 id="çº¯ç¼–è¯‘æ—¶ï¼š"><a href="#çº¯ç¼–è¯‘æ—¶ï¼š" class="headerlink" title="çº¯ç¼–è¯‘æ—¶ï¼š"></a>çº¯ç¼–è¯‘æ—¶ï¼š</h4><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>

<p>ç»è¿‡ç¼–è¯‘ Compile â¬‡</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>
span<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'hello world'</span>
div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span></code></pre>

<p>çº¯ç¼–è¯‘æ—¶æ¡†æ¶ä¸éœ€è¦Renderå‡½æ•°ï¼Œåœ¨Compileé˜¶æ®µç›´æ¥ç”Ÿäº§å‘½ä»¤å¼ä»£ç ä»¥è¾¾åˆ°ç†è®ºæœ€å¤§æ€§èƒ½ï¼ˆSvelteï¼‰ï¼Œè‡ªç„¶å®ƒä¹Ÿä¸éœ€è¦è™šæ‹ŸDOMï¼Œä½†æ˜¯è¿™ç§åšæ³•æœ‰æŸçµæ´»æ€§ï¼Œç”¨æˆ·æä¾›çš„å†…å®¹å¿…é¡»ç»è¿‡ç¼–è¯‘æ‰èƒ½ä½¿ç”¨ã€‚</p>
<p>Vue.js 3 åœ¨ç¼–è¯‘ä¼˜åŒ–æ–¹é¢åšåˆ°äº†æ€§èƒ½ç”šè‡³ä¸è¾“çº¯ç¼–è¯‘æ—¶çš„æ¡†æ¶ï¼Œå¹¶ä¸”ä¿ç•™äº†è¿è¡Œæ—¶çš„çµæ´»æ€§ï¼Œä¼˜åŒ–æ–¹é¢çš„å†…å®¹ä¼šåœ¨åé¢çš„ç« èŠ‚æåŠã€‚</p>
<h2 id="ç¬¬äºŒç« -æ¡†æ¶è®¾è®¡çš„æ ¸å¿ƒè¦ç´ "><a href="#ç¬¬äºŒç« -æ¡†æ¶è®¾è®¡çš„æ ¸å¿ƒè¦ç´ " class="headerlink" title="ç¬¬äºŒç«  æ¡†æ¶è®¾è®¡çš„æ ¸å¿ƒè¦ç´ "></a>ç¬¬äºŒç«  æ¡†æ¶è®¾è®¡çš„æ ¸å¿ƒè¦ç´ </h2><h3 id="æå‡å¼€å‘ä½“éªŒ"><a href="#æå‡å¼€å‘ä½“éªŒ" class="headerlink" title="æå‡å¼€å‘ä½“éªŒ"></a>æå‡å¼€å‘ä½“éªŒ</h3><p>Vue3.0 ä½¿ç”¨äº†ä¸€å¥—å¥å£®çš„é”™è¯¯é¢„è­¦æœºåˆ¶ï¼Œå½“ç”¨æˆ·æ²¡æœ‰å¦‚é¢„æœŸçš„ä½¿ç”¨æ¡†æ¶æ—¶ï¼Œèƒ½ä½¿ç”¨æˆ·èƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„ã€Vueå±‚é¢çš„é”™è¯¯æç¤ºï¼›è€Œä¸æ˜¯æ¥è‡ªäºJavaScriptåº•å±‚çš„é”™è¯¯æç¤ºã€‚</p>
<blockquote>
<p>Vue.jsä¸­é‡‡ç”¨é›†ä¸­çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥æ§åˆ¶é”™è¯¯çš„è¾“å‡º</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//utils.js</span>
<span class="token keyword">let</span> <span class="token function-variable function">handleError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">callWithErrorHandling</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">registerErrorHandler</span><span class="token punctuation">(</span><span class="token parameter">handleFn</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        handleError <span class="token operator">=</span> handleFn
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">function</span> <span class="token function">callWithErrorHandling</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span><span class="token punctuation">&#123;</span>
        fn <span class="token operator">&amp;&amp;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// user.js</span>
<span class="token keyword">import</span> utils <span class="token keyword">from</span> <span class="token string">'./utils.js'</span>
utils<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<p>è¿™æ ·ç”¨æˆ·å¾—åˆ°ç›¸åº”çš„é”™è¯¯æ•è·å°±ä¸å¿…è‡ªå·±å†™tryCatchå®ç°äº†</p>
<p>å¦å¤–Vueä¸ºäº†ç»Ÿä¸€æ³¨å†Œé”™è¯¯æ”¶é›†çš„ç”¨æˆ·éœ€è¦æä¾›äº†å…¨å±€çš„é”™è¯¯å¤„ç†å‡½æ•°: </p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>errorHandler <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// é”™è¯¯å¤„ç†ç¨‹åº</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>åœ¨è¾“å‡ºæ—¥å¿—çš„æ–¹å‘ï¼ŒVueä¹Ÿåšäº†ç›¸åº”çš„å¼€å‘ä¼˜åŒ–ï¼Œå¯¹äºVueå†…éƒ¨å£°æ˜çš„æ•°æ®æ¥å£ï¼Œå¦‚refï¼Œå¦‚æœæƒ³è¦åœ¨æ§åˆ¶å°ç›´æ¥çš„æ‰“å°ç»“æœï¼Œåœ¨Chromeæµè§ˆå™¨ä¸­é€šè¿‡è®¾ç½®DevToolsä¸­Preferenceä¸­çš„Console -&gt; â€œEnable custom formattersâ€å¼€å¯è‡ªå®šä¹‰æ ¼å¼çš„æ—¥å¿—è¾“å‡ºã€‚å®ç°æ–¹å¼å¯ä»¥é€šè¿‡åœ¨æºç ä¸­æŸ¥æ‰¾initCustomFormatteræ–¹æ³•ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token comment">// RefImpl &#123;__v_isShallow: false, dep: undefined, __v_isRef: true, _rawValue: 0, _value: 0&#125; </span></code></pre>
<p>æ‰“å¼€å</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token comment">// Ref&lt;0></span></code></pre>

<h3 id="æ§åˆ¶æ¡†æ¶çš„ä½“ç§¯"><a href="#æ§åˆ¶æ¡†æ¶çš„ä½“ç§¯" class="headerlink" title="æ§åˆ¶æ¡†æ¶çš„ä½“ç§¯"></a>æ§åˆ¶æ¡†æ¶çš„ä½“ç§¯</h3><p>é€šè¿‡é¢„å®šä¹‰çš„æ‰‹æ®µï¼Œåœ¨rollup.jsä¸­å®šä¹‰äº‹å…ˆå‡†å¤‡å¥½çš„ç¯å¢ƒå˜é‡ / æˆ–é€šè¿‡webpackä¸­çš„DefinePluginæ’ä»¶ï¼Œåœ¨æ‰“åŒ…ä¹‹å‰æ’å…¥åˆ°æºç ä¸­å»ï¼Œè¿™æ ·åœ¨çœŸæ­£ç¼–è¯‘çš„æ—¶å€™ï¼Œå¯¹äºå¤±æ•ˆçš„æ¡ä»¶åˆ†æ”¯å°±ä¼šè¿›è¡Œå‰ªæ(ä¹Ÿå«æ‘‡æ ‘ä¼˜åŒ–: tree-shaking)</p>
<blockquote>
<p>ä¾‹å¦‚ä¸Šé¢æ‰€è®²çš„åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒVueè‡´åŠ›äºç»™ç”¨æˆ·è‰¯å¥½çš„ä»£ç æç¤ºå’Œè­¦å‘Šï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒè¿™äº›ä»£ç ä¸ä¼šè¢«ç”¨åˆ°ï¼Œéœ€è¦è¢«å‰ªæã€‚</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ‰€ä»¥åœ¨æºç ä¸­çœ‹åˆ°çš„warnç›¸å…³çš„ä»£ç é•¿è¿™æ ·</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>__DEV__ <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>res<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to mount app: mount target selector "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>container<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" returned null</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åœ¨æ‰“åŒ…å·¥å…·çœ¼ä¸­é•¿è¿™æ ·</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>res<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to mount app: mount target selector "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>container<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">" returned null</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>æœ€ååœ¨ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ä¸­ï¼Œç›´æ¥å°±æ¶ˆå¤±äº†</p>
<h3 id="æ¡†æ¶è¦åšåˆ°è‰¯å¥½çš„-Tree-Shaking"><a href="#æ¡†æ¶è¦åšåˆ°è‰¯å¥½çš„-Tree-Shaking" class="headerlink" title="æ¡†æ¶è¦åšåˆ°è‰¯å¥½çš„ Tree-Shaking"></a>æ¡†æ¶è¦åšåˆ°è‰¯å¥½çš„ Tree-Shaking</h3><p>ç°åœ¨æ— è®ºrollupè¿˜æ˜¯webpackéƒ½æ”¯æŒtree-shakingï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡é¢„å®šä¹‰çš„æ‰‹æ®µæ¥è§¦å‘tree-shakingæ˜¯å®Œå…¨ä¸å¤Ÿçš„ï¼Œä¾‹å¦‚æˆ‘ä»¬é¡¹ç›®ä¸­å®Œå…¨å°±æ²¡æœ‰ç”¨åˆ°Transitionè¿™ä¸ªå†…éƒ¨ç»„ä»¶ï¼Œé‚£ä¹ˆåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå®ƒå°±åº”è¯¥è¢«ä½œä¸ºdead codeè¢«å¤„ç†æ‰ï¼Œè¿™é‡Œå°±éœ€è¦è¯´åˆ°tree-shakingçš„ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼š</p>
<blockquote>
<p>æ¨¡å—å¿…é¡»æ˜¯ESMçš„:</p>
<p>å› ä¸ºtree-shakingåªèƒ½å¯¹é™æ€è¯­è¨€ç»“æ„åšå‰ªææ“ä½œï¼Œä¾èµ–äºESMçš„é™æ€ç»“æ„ï¼Œjsæœ¬èº«æ˜¯ä¸€ä¸ªåŠ¨æ€è¯­è¨€ï¼Œæ— æ³•tree-shakingã€‚</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>foo<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'utils.js'</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>foo
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>bar
<span class="token punctuation">&#125;</span></code></pre>
<p>æ‰“åŒ…</p>
<pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>npx<span class="token punctuation">)</span> rollup index.js -f esm -o bundle.js</code></pre>
<p>å¾—åˆ°çš„ç»“æœ</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//bundle.js</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>foo
<span class="token punctuation">&#125;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p>å¯ä»¥çœ‹åˆ°æ‰“åŒ…ç»“æœå¹¶ä¸åŒ…å«barå‡½æ•°ï¼Œ</p>
<p>ä½†æ˜¯å®é™…ä¸Šfooä¹Ÿæ²¡æœ‰æ‰§è¡Œï¼Œä¸ºä½•æ²¡æœ‰è¢«å‰ªæå‘¢?</p>
<p>ç­”æ¡ˆå°±æ˜¯tree-shakingçš„<code>ç¬¬äºŒä¸ªæ¡ä»¶</code>:</p>
<blockquote>
<p>å‡½æ•°å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼š</p>
<p>å› ä¸ºæ‰“åŒ…å·¥å…·ä¸èƒ½åˆ¤æ–­å®ƒæ˜¯çº¯å‡½æ•°è¿˜æ˜¯æœ‰å‰¯ä½œç”¨çš„å‡½æ•°</p>
</blockquote>
<p>è¯•æƒ³ä¸€ä¸‹objçš„å·²ç»è¢«definePropertyæ‹¦æˆªäº†getæ–¹æ³•ï¼Œæˆ–è€…æœ¬èº«å°±æ˜¯ä¸€ä¸ªProxyï¼Œè¿™ä¸ªProxyä»£ç†å¹¶ç›‘å¬äº†getå¤¹å­(trap)ï¼Œé‚£æ‰“åŒ…å·¥å…·æ— ä»å¾—çŸ¥åœ¨getæ–¹æ³•ä¸­ï¼Œæ˜¯å¦å­˜åœ¨å½±å“å…¨å±€çš„å‰¯ä½œç”¨</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// proxy</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">const</span> <span class="token function-variable function">useProxy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        count<span class="token operator">++</span>
        Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">useProxy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>foo <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 1</span></code></pre>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// äº¦æˆ–è€…</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">const</span> <span class="token function-variable function">useDefineProperty</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token operator">=></span> Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        count<span class="token operator">++</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">useDefineProperty</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>foo <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 1</span></code></pre>

<blockquote>
<p>æ­£å› ä¸ºé™æ€çš„åˆ†æjavascriptå¾ˆéš¾ï¼Œæ‰€ä»¥æ‰“åŒ…å·¥å…·éƒ½ä¼šæä¾›ä¸€ä¸ªæœºåˆ¶å‘Šè¯‰å®ƒâ€œè¿™æ®µä»£ç æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä½ å¯ä»¥ç§»é™¤â€</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> foo <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'utils.js'</span>
<span class="token comment">/*#__PURE__*/</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p>è¿™ä¸ªæ³¨é‡Šä»£ç <code>/*#__PURE__*/</code>å°±æ˜¯ä¸€ç§æ ‡è®°ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™é‡Œçš„ä»£ç å¦‚æœæ²¡æœ‰è¢«è°ƒç”¨ï¼Œå¯ä»¥ä¸ä¿ç•™ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
<h3 id="æ¡†æ¶åº”è¯¥è¾“å‡ºæ€æ ·çš„æ„å»ºäº§ç‰©"><a href="#æ¡†æ¶åº”è¯¥è¾“å‡ºæ€æ ·çš„æ„å»ºäº§ç‰©" class="headerlink" title="æ¡†æ¶åº”è¯¥è¾“å‡ºæ€æ ·çš„æ„å»ºäº§ç‰©"></a>æ¡†æ¶åº”è¯¥è¾“å‡ºæ€æ ·çš„æ„å»ºäº§ç‰©</h3><p>ä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿç›´æ¥é€šè¿‡<code>&lt;script&gt;</code>æ ‡ç­¾å¼•å…¥å¹¶ä½¿ç”¨ï¼ŒVueéœ€è¦è¾“å‡ºIIFEæ ¼å¼çš„èµ„æºï¼Œå³:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Vue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    exports<span class="token punctuation">.</span>createApp <span class="token operator">=</span> createApp
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> exports
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<p>ä¸ºäº†è®©ç”¨æˆ·èƒ½ä½¿ç”¨<code>&lt;script type=&quot;module&quot;&gt;</code>å¼•å…¥å¹¶ä½¿ç”¨ï¼ŒVueéœ€è¦è¾“å‡ºESMæ ¼å¼çš„èµ„æºã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒVueå½“ä¸­ESMçš„èµ„æºæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ç«¯çš„vue.esm-broswer.jsï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ç»™æ‰“åŒ…å·¥å…·ä½¿ç”¨çš„vue.esm-bundler.jsï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨ä¸å¯¹é¢„å®šä¹‰å˜é‡<code>__DEV__</code>çš„å¤„ç†ï¼Œå‰è€…ç›´æ¥å°†<code>__DEV__</code>å¸¸é‡ç½®ä¸º<code>true</code>æ¥å¤„ç†ï¼Œåè€…å°†å¸¸é‡æ›¿æ¢ä¸º<code>process.env.NODE_ENV === &#39;production&#39;</code>è¡¨è¾¾å¼ã€‚</p>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡webpackæˆ–è€…rollupè‡ªå®šä¹‰æ„å»ºèµ„æºçš„ç›®æ ‡ç¯å¢ƒï¼Œä½†æ˜¯è¢«<code>__DEV__</code>æ ‡è®°çš„è¿™æ®µä»£ç æœ€ååªä¼šå‡ºç°åœ¨å¼€å‘ç¯å¢ƒä¸­ã€‚</p>
<p>ä¸ºäº†å…¼å®¹æœåŠ¡ç«¯æ¸²æŸ“ï¼ŒVueè¿˜å¯ä»¥è¾“å‡ºCJSç‰ˆæœ¬çš„ä»£ç ï¼Œè¿™å¥—ä»£ç æ˜¯åœ¨NodeJSç¯å¢ƒä¸­è¿è¡Œçš„ã€‚</p>
<h3 id="ç‰¹æ€§å¼€å…³"><a href="#ç‰¹æ€§å¼€å…³" class="headerlink" title="ç‰¹æ€§å¼€å…³"></a>ç‰¹æ€§å¼€å…³</h3><p>ç±»ä¼¼äº<code>__DEV__</code>ï¼Œåœ¨Vue.jsä¸­è¿˜æœ‰åˆ«çš„ä¸€äº›é¢„å®šä¹‰çš„å‚æ•°ï¼Œè¿™äº›åœ¨ä¼˜åŒ–æœ€ç»ˆä»£ç ä½“ç§¯æ—¶æœ‰å¸®åŠ©ã€‚</p>
<p>åœ¨æºç ä¸­æœ‰å‡ºç°<code>__FEATURE_OPTIONS_API__</code>è¿™ä¸ªå¸¸é‡ï¼Œåœ¨æ„å»ºèµ„æºæ—¶ä¼šåˆ¤æ–­è¾“å‡ºäº§ç‰©æ˜¯ç»™æµè§ˆå™¨ä½¿ç”¨çš„è¿˜æ˜¯ç»™æ‰“åŒ…å·¥å…·ä½¿ç”¨çš„ï¼Œå¦‚æœæ˜¯ç»™<code>-bundler</code>å­—æ ·çš„èµ„æºï¼Œå³ç»™æ‰“åŒ…å·¥å…·ä½¿ç”¨çš„ï¼Œè¿™ä¸ªå‚æ•°ä¼šå˜ä¸º<code>__VUE_OPTIONS_API__</code>ï¼Œè¿™ä¸ªå‚æ•°ä¾¿æˆä¸ºäº†ç‰¹æ€§å¼€å…³ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åˆ¤æ–­</span>
<span class="token punctuation">&#123;</span>
    __FEATURE_OPTIONS_API__<span class="token operator">:</span> isBundlerESMBuild<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">__VUE_OPTIONS_API__</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åœ¨webpackä¸­é¢„å®šä¹‰ç‰¹æ€§å¼€å…³</span>
<span class="token keyword">new</span> <span class="token class-name">Webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
     <span class="token comment">// å¼€å¯optionsApiç‰¹æ€§</span>
     <span class="token comment">// å³æ‰“åŒ…ç»“æœä¸­æœ‰æ¡†æ¶æä¾›çš„å…¼å®¹Vue2.xçš„optionsApiçš„ä»£ç </span>
    __VUE_OPTIONS_API__<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="è‰¯å¥½çš„typescriptæ”¯æŒ"><a href="#è‰¯å¥½çš„typescriptæ”¯æŒ" class="headerlink" title="è‰¯å¥½çš„typescriptæ”¯æŒ"></a>è‰¯å¥½çš„typescriptæ”¯æŒ</h3><blockquote>
<p>å…¶å®å°±ä¸€å¥è¯ï¼Œä½¿ç”¨TSç¼–å†™ä»£ç ä¸å¯¹TSç±»å‹æ”¯æŒå‹å¥½æ˜¯ä¸¤ç äº‹ï¼Œçœ‹ä¾‹å­ï¼š</p>
</blockquote>
<pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> val
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// const res: any</span></code></pre>

<pre class="language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">foo</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> val
<span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// const res: 0</span></code></pre>

<p>Vueä¸ºåšåˆ°å®Œå–„çš„TSç±»å‹æ”¯æŒï¼Œåšäº†å¾ˆå¤§çš„åŠªåŠ›ï¼Œå…·ä½“å¯ä»¥æœç´¢<code>&#39;runtime-core/src/apiDefineComponent.ts&#39;</code>æ–‡ä»¶</p>
<h2 id="ç¬¬ä¸‰ç« -Vue-js-3-çš„è®¾è®¡æ€è·¯"><a href="#ç¬¬ä¸‰ç« -Vue-js-3-çš„è®¾è®¡æ€è·¯" class="headerlink" title="ç¬¬ä¸‰ç«  Vue.js 3 çš„è®¾è®¡æ€è·¯"></a>ç¬¬ä¸‰ç«  Vue.js 3 çš„è®¾è®¡æ€è·¯</h2><h3 id="å£°æ˜å¼çš„æè¿°UI"><a href="#å£°æ˜å¼çš„æè¿°UI" class="headerlink" title="å£°æ˜å¼çš„æè¿°UI"></a>å£°æ˜å¼çš„æè¿°UI</h3><p>Vue.js 3 æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„UIæ¡†æ¶ï¼Œå¦‚æœè®©æˆ‘ä»¬è‡ªå·±è®¾è®¡ä¸€ä¸ªå£°æ˜å¼çš„UIæ¡†æ¶ï¼Œæˆ‘ä»¬è‡ªå·±å¾—å…ˆçŸ¥é“å‰ç«¯é¡µé¢éƒ½è®¾è®¡å“ªäº›å†…å®¹:</p>
<ul>
<li>DOMå…ƒç´ ï¼šä¾‹å¦‚divæ ‡ç­¾ã€aæ ‡ç­¾</li>
<li>å±æ€§: aæ ‡ç­¾ä¸Šçš„hrefå±æ€§ï¼Œidã€classå±æ€§</li>
<li>äº‹ä»¶: clickã€keydown</li>
<li>å…ƒç´ çš„å±‚çº§ç»“æ„: DOMæ ‘çš„æ‰¿æ¥ç»“æ„ï¼Œå­èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹</li>
</ul>
<blockquote>
<p>æ‹¿Vue.js 3 çš„æ¨¡ç‰ˆè¯­æ³•æ¥è¯´</p>
</blockquote>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handler<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    hello wolrd
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>

<ul>
<li>ä½¿ç”¨å’ŒWHATWGè§„èŒƒçš„HTMLæ ‡ç­¾ä¸€è‡´çš„æ–¹å¼æ¥æè¿°DOMå…ƒç´ ä»¥åŠå±‚çº§åµŒå¥—å…³ç³»: <code>&lt;div&gt; hello world &lt;/div&gt;</code></li>
<li>ä½¿ç”¨ä¸HTMLæ ‡ç­¾ä¸€è‡´çš„æ–¹å¼æè¿°å±æ€§: <code>&lt;div class=&quot;foo&quot;&gt;&lt;/div&gt;</code></li>
<li>ä½¿ç”¨<code>:</code>æˆ–<code>v-bind</code>æ¥æè¿°åŠ¨æ€ç»‘å®šçš„å±æ€§: <code>&lt;div :id=&quot;app&quot;&gt;&lt;/div&gt;</code></li>
<li>ä½¿ç”¨<code>@</code>æˆ–<code>v-on</code>æ¥æè¿°äº‹ä»¶: <code>&lt;div @click=&quot;handler&quot;&gt;&lt;/div&gt;</code></li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ç”¨æˆ·ä¸åœ¨éœ€è¦è‡ªå·±æ‰‹åŠ¨è¾“å…¥å‘½ä»¤å¼ä»£ç ç»‘å®šäº‹ä»¶å’Œå±æ€§ï¼Œåªç”¨ä¹‹å‰å­¦ä¹ HTMLçš„æˆæœ¬å°±èƒ½å¾ˆè½»æ¾çš„èä¼šè´¯é€šï¼Œè¿™ä¹Ÿæ˜¯Vueè‡ªç§°æ¸è¿›å¼æ¡†æ¶çš„ä¸€ä¸ªåŸå› ï¼Œå­¦ä¹ æˆæœ¬æ˜¯æ¸è¿›å¼çš„ã€‚</p>
<p>é™¤äº†ä½¿ç”¨<code>æ¨¡ç‰ˆ</code>è¯­è¨€ä¹‹å¤–ï¼ŒVue.js 3 è¿˜æ”¯æŒä½¿ç”¨javascriptå¯¹è±¡(å³<code>è™šæ‹ŸDOM</code>)æ¥æè¿°UI:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        onClick<span class="token operator">:</span> handler
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            tag<span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token string">'hello world'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>è¿™ä¹Ÿæ˜¯Vue.js 3 å£°æ˜å¼UI<code>çµæ´»æ€§</code>çš„ä¸€ç‚¹ä½“ç°ï¼Œä½¿ç”¨JSå¯¹è±¡(<code>è™šæ‹ŸDOM</code>)æ¥æè¿°ä½ ç”šè‡³å¯ä»¥è¿™ä¹ˆå†™:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> level <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">h</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>level<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> level
<span class="token punctuation">&#125;</span></code></pre>
<p>ç”¨æ¨¡ç‰ˆè¯­å¥å°±åƒè¿™æ ·:  </p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>level === 1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>level === 2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>level === 3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>level === 4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>level === 5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- ... --></span></code></pre>

<p>ç›´æ¥å†™<code>è™šæ‹ŸDOM</code>è¿™ç§æ–¹å¼å°‘äº†ä¸€ä¸ªç¼–è¯‘æ¨¡ç‰ˆçš„è¿‡ç¨‹ï¼Œ<code>*ä½†æ˜¯æ¨¡ç‰ˆäº«å—çš„ä¼˜åŒ–ä½“éªŒ(shapeFlag/patchFlag)ï¼Œéœ€è¦è‡ªå·±å»å®ç°(*è‡ªå·±çš„ç†è§£, ä¸ä¸€å®šæ­£ç¡®, ååŒ)</code></p>
<p>ä¸è¿‡çœŸæ­£åœ¨Vue.js 3 ä¸­å†™è™šæ‹ŸDOMï¼Œæ˜¯é€šè¿‡å·¥å…·å‡½æ•°<code>h()</code>æ¥å†™çš„ï¼Œ<code>h</code>æ‰€åšçš„äº‹æƒ…ï¼Œå…¶å®å°±æ˜¯ç®€åŒ–å¯¹è±¡çš„ä¹¦å†™æ–¹å¼ï¼Œå…¶ç”Ÿäº§çš„ç»“æœå°±æ˜¯æˆ‘ä»¬ä¸Šé¢å†™çš„JSå¯¹è±¡:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> onClick<span class="token operator">:</span> handler <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>åŒï¼š</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            tag<span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
            props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                onClick<span class="token operator">:</span> handler
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>æ‰€ä»¥è™šæ‹ŸDOMå’Œæ¸²æŸ“å‡½æ•°å…¶å®ä¹Ÿéƒ½æ²¡è¿™ä¹ˆç¥ç§˜, æ¸²æŸ“å‡½æ•°å³æ˜¯renderï¼Œè¦æ¸²æŸ“ä¸€ä¸ªç»„å»ºçš„å†…å®¹æ—¶ï¼Œæ¸²æŸ“å™¨ä¼šè°ƒç”¨è¿™ä¸ªrenderæ‹¿åˆ°è™šæ‹ŸDOMï¼Œå°±å¯ä»¥æŠŠç»„ä»¶çš„å†…å®¹æ¸²æŸ“å‡ºæ¥äº†ã€‚</p>
<h3 id="åˆè¯†æ¸²æŸ“å™¨"><a href="#åˆè¯†æ¸²æŸ“å™¨" class="headerlink" title="åˆè¯†æ¸²æŸ“å™¨"></a>åˆè¯†æ¸²æŸ“å™¨</h3><p>æ¸²æŸ“å™¨å³æ˜¯æŠŠ<code>è™šæ‹ŸDOM</code>å˜æˆ<code>çœŸå®DOM</code>å¹¶æ¸²æŸ“åˆ°æµè§ˆå™¨é‡Œçš„å‡½æ•°ï¼Œå…ˆå†™ä¸€æ®µè™šæ‹ŸDOMå¯¹è±¡:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> <span class="token string">'h1'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        onClick<span class="token operator">:</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token string">'click me'</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å®ç°ä¸€ä¸ªæœ€ç®€æ˜“çš„æ¸²æŸ“å™¨:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> root</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
                key<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                vode<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
        el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        vnode<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=></span> <span class="token function">renderer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>è¿™é‡Œçš„rendererå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°:</p>
<ul>
<li>vnode: è™šæ‹ŸDOMå¯¹è±¡</li>
<li>container: ä¸€ä¸ªçœŸå®çš„DOMå…ƒç´ ï¼Œä½œä¸ºæŒ‚è½½å®¹å™¨ï¼Œæ¸²æŸ“å™¨ä¼šæŠŠæ¸²æŸ“å‡ºçš„çœŸå®DOMæŒ‚è½½åœ¨è¯¥å®¹å™¨ä¸‹ã€‚</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">renderer</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span></code></pre>

<p>è¿™æ—¶æµè§ˆå™¨å°±èƒ½è¿è¡Œè¿™æ®µä»£ç äº†ï¼Œæ¸²æŸ“å‡ºâ€™click meâ€™æ–‡æœ¬ï¼Œç‚¹å‡»æ–‡æœ¬ä¼šå¼¹å‡ºä¸€ä¸ªalertã€‚</p>
<blockquote>
<p>è¿™äº›åªæ˜¯åœ¨åˆ›å»ºèŠ‚ç‚¹é˜¶æ®µçš„ï¼Œæ¸²æŸ“å™¨çš„ç²¾é«“éƒ½åœ¨æ›´æ–°èŠ‚ç‚¹çš„é˜¶æ®µã€‚åœ¨ä¹‹åçš„æ¸²æŸ“å™¨Difféƒ¨åˆ†ä¼šè¯¦ç»†çœ‹ã€‚</p>
</blockquote>
<h3 id="ç»„ä»¶çš„æœ¬è´¨"><a href="#ç»„ä»¶çš„æœ¬è´¨" class="headerlink" title="ç»„ä»¶çš„æœ¬è´¨"></a>ç»„ä»¶çš„æœ¬è´¨</h3><p>è™šæ‹ŸDOMå°±æ˜¯ç”¨æ¥æè¿°çœŸå®DOMçš„JSå¯¹è±¡ï¼Œé‚£ä¹ˆVueä¸­çš„ç»„ä»¶åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<blockquote>
<p>å…¶å®è™šæ‹ŸDOMè¿˜èƒ½å¤Ÿæè¿°ç»„ä»¶ï¼Œç»„ä»¶å®é™…å°±æ˜¯ä¸€ç»„DOMå…ƒç´ çš„å°è£…ã€‚</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        children<span class="token operator">:</span> <span class="token string">'click me'</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å¯ä»¥çœ‹åˆ°ï¼Œç»„ä»¶çš„è¿”å›å€¼ä¹Ÿæ˜¯è™šæ‹ŸDOMï¼Œææ¸…æ¥šç»„ä»¶çš„æœ¬è´¨å°±å¯ä»¥ç”¨è™šæ‹ŸDOMæè¿°ç»„ä»¶äº†, æˆ‘ä»¬å¯ä»¥ç”¨è™šæ‹ŸDOMä¸­çš„tagå±æ€§å­˜å‚¨ç»„ä»¶å‡½æ•°:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    tag<span class="token operator">:</span> MyComponent
<span class="token punctuation">&#125;</span></code></pre>

<p>å°±åƒ<code>tag: &#39;div&#39;</code>ç”¨æ¥æè¿°<code>&lt;div&gt;</code>æ ‡ç­¾ä¸€æ ·ï¼Œ<code>tag: Component</code>ç”¨æ¥æè¿°ç»„ä»¶ï¼Œæ¸²æŸ“å™¨éœ€è¦ä¸€ä¸ªæ”¯æŒç»„ä»¶çš„èƒ½åŠ›ï¼Œæ‰€ä»¥è¦å°†å‰é¢å†™è¿‡çš„rendereråšä¸ªä¿®æ”¹ã€‚</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">renderer</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// æ¸²æŸ“åŸç”Ÿæ ‡ç­¾å…ƒç´ </span>
        <span class="token function">mountElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// æ¸²æŸ“ç»„ä»¶</span>
        <span class="token function">mountComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">function</span> <span class="token function">mountElement</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
                key<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                vnode<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
        el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        vnode<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=></span> <span class="token function">renderer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>

    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ç›´æ¥è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œè¿”å›è™šæ‹ŸDOM</span>
    <span class="token keyword">const</span> subtree <span class="token operator">=</span> vnode<span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// é€’å½’è°ƒç”¨rendereræ¸²æŸ“subtree</span>
    <span class="token function">renderer</span><span class="token punctuation">(</span>subtree<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>é™¤äº†å‡½æ•°å¼ç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ä»£è¡¨ç»„ä»¶ï¼Œè¯¥å¯¹è±¡æœ‰ä¸ªrenderå‡½æ•°ï¼Œå…¶è¿”å›å€¼ä»£è¡¨ç»„ä»¶è¦æ¸²æŸ“çš„å†…å®¹: </p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
            props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token string">'click me'</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>é’ˆå¯¹è¿™ç§æƒ…å†µä¹Ÿéœ€è¦ä¿®æ”¹æ¸²æŸ“å™¨çš„åˆ¤æ–­æ¡ä»¶: </p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// renderer</span>
<span class="token keyword">function</span> <span class="token function">renderer</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">mountElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">mountComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// mountComponent</span>
<span class="token keyword">function</span> <span class="token function">mountComponent</span> <span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> subtree <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">renderer</span><span class="token punctuation">(</span>subtree<span class="token punctuation">,</span> container<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>Vueä¸­çš„æœ‰çŠ¶æ€ç»„ä»¶å°±æ˜¯ç”¨å¯¹è±¡ç»“æ„æ¥è¡¨è¾¾çš„ï¼Œæ— çŠ¶æ€ç»„ä»¶åˆ™æ˜¯ç”¨å‡½æ•°æ¥è¡¨è¾¾çš„ã€‚</p>
</blockquote>
<blockquote>
<p>(*Vue 2.*ä¸­çš„functionalç»„ä»¶åœ¨Vue 3.*ä¸­å·²ç»æ— éœ€å†åšæ ‡è®°ï¼Œå› ä¸ºåœ¨ Vue 3.* ä¸­ï¼Œæ‰€æœ‰çš„å‡½æ•°å¼ç»„ä»¶éƒ½æ˜¯ç”¨æ™®é€šå‡½æ•°åˆ›å»ºçš„ï¼Œæ€§èƒ½å‡ ä¹æ— å·®å¼‚)</p>
</blockquote>
<h3 id="æ¨¡ç‰ˆå·¥ä½œåŸç†"><a href="#æ¨¡ç‰ˆå·¥ä½œåŸç†" class="headerlink" title="æ¨¡ç‰ˆå·¥ä½œåŸç†"></a>æ¨¡ç‰ˆå·¥ä½œåŸç†</h3><p>ä¸è®ºæˆ‘ä»¬ä½¿ç”¨è™šæ‹ŸDOM(æ¸²æŸ“å‡½æ•°)æˆ–æ˜¯templateæ¨¡ç‰ˆå†™å•æ–‡ä»¶ç»„ä»¶ï¼Œéƒ½æ˜¯å±äºå£°æ˜å¼çš„æè¿°UIï¼ŒVueä¸­æ¨¡ç‰ˆæ˜¯å¦‚ä½•å˜ä¸ºè™šæ‹ŸDOMçš„ï¼Œæœ‰å…³è¿™éƒ¨åˆ†ä¼šåœ¨åç»­çš„ç¼–è¯‘å™¨è¯¦è§£ï¼Œè¿™é‡Œåªè¦äº†è§£å¤§è‡´æ­¥éª¤ã€‚</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handler<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<p>ä¸ç›´æ¥æ‰‹å†™:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> onClick<span class="token operator">:</span> handler <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'click me'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åè€…å°‘äº†htmlç¼–è¯‘æ¨¡ç‰ˆçš„è¿‡ç¨‹ï¼Œå¯¹äºä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œå®ƒè¦æ¸²æŸ“çš„å†…å®¹æœ€ç»ˆéƒ½æ˜¯é€šè¿‡æ¸²æŸ“å‡½æ•°<code>render</code>æ¥æè¿°çš„ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handler<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>ä¼šè¢«ç¼–è¯‘æˆ:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token comment">/* ... */</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> onClick<span class="token operator">:</span> handler <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'click me'</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å…¶ç»“æœå°±æ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œé‡Œé¢å«æœ‰ä¸€ä¸ªrenderå‡½æ•°ï¼Œå°±å¦‚æˆ‘ä»¬ä¸Šæ–‡æ‰€è¯´çš„ç»„ä»¶çš„æœ¬è´¨ä¸€æ ·ï¼Œå†ç¼–è¯‘æˆè™šæ‹ŸDOMäº¤ç”±æ¸²æŸ“å™¨æ¸²æŸ“ã€‚</p>
<h3 id="Vue-js-æ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“"><a href="#Vue-js-æ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“" class="headerlink" title="Vue.js æ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“"></a>Vue.js æ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“</h3><p>ç»„ä»¶çš„å®ç°ä¾èµ–äº<code>æ¸²æŸ“å™¨</code>ï¼Œæ¨¡ç‰ˆçš„ç¼–è¯‘ä¾èµ–äº<code>ç¼–è¯‘å™¨</code>ï¼Œä¸”ç¼–è¯‘åç”Ÿæˆçš„ä»£ç æ˜¯æ ¹æ®æ¸²æŸ“å™¨å’Œè™šæ‹ŸDOMçš„è®¾è®¡å†³å®šçš„ï¼Œå› æ­¤Vue.jså„ä¸ªæ¨¡å—ä¹‹é—´æ˜¯äº’ç›¸å…³è”ã€äº’ç›¸åˆ¶çº¦çš„ï¼Œå…±åŒæ„æˆä¸€ä¸ªæœ‰æœºæ•´ä½“ã€‚</p>
<p>å‡è®¾æœ‰ä¸ªæ¨¡ç‰ˆ:</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cls<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>

<p>æ ¹æ®ä¸Šæ–‡ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ç¼–è¯‘å™¨ä¼šæŠŠè¿™æ®µä»£ç ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">class</span><span class="token operator">:</span> cls <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>ç»è¿‡å·¥å…·å‡½æ•°<code>h</code>ä¹‹å:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            id<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
            <span class="token keyword">class</span><span class="token operator">:</span> cls
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>å¯ä»¥å‘ç°è¿™æ®µä»£ç ä¸­<code>cls</code>æ˜¯å˜é‡ï¼Œå®ƒå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨æ˜¯æ€ä¹ˆä¸€çœ¼å°±çŸ¥é“å“ªäº›æ˜¯é™æ€å±æ€§ï¼Œå“ªäº›æ˜¯åŠ¨æ€çš„å‘¢ï¼Ÿ</p>
<p>å®é™…ä¸Šåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šåˆ†æåŠ¨æ€å†…å®¹ï¼Œå¹¶åœ¨äº¤ä»˜ç»™æ¸²æŸ“å™¨ä¹‹å‰å°±æ ‡æ³¨å‡ºæ¥ï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆè™šæ‹ŸDOMçš„æ—¶å€™ï¼Œå°±ä¼šé™„å¸¦ä¸Šè¿™äº›ä¿¡æ¯:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
        props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            id<span class="token operator">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
            <span class="token keyword">class</span><span class="token operator">:</span> cls
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        patchFlags<span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// å‡è®¾æ•°å­— 1 ä»£è¡¨classå±æ€§æ˜¯åŠ¨æ€çš„</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>è¿™æ ·çš„é…åˆä¸‹ï¼Œæ¸²æŸ“å™¨å°±çŸ¥é“äº†ä»€ä¹ˆåœ°æ–¹éœ€è¦å½“ä½œåŠ¨æ€å¤„ç†ï¼Œè€Œä¸éœ€è¦å¤§è´¹å‘¨ç« å»å¯»æ‰¾å˜æ›´ç‚¹ï¼Œè€Œä¹‹æ‰€ä»¥ç¼–è¯‘å™¨ä¼šæå‰åšå¥½å‡†å¤‡ä¹Ÿæ˜¯å› ä¸ºæ¸²æŸ“å™¨å’Œè™šæ‹ŸDOMçš„è®¾è®¡å†³å®šçš„ã€‚</p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">æˆ‘å¾ˆå¯çˆ±ï¼Œè¯·ç»™æˆ‘é’±.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://shanghai-1309153523.cos.ap-shanghai.myqcloud.com/blogImage/alipay.jpg"><img loading="lazy" src="https://shanghai-1309153523.cos.ap-shanghai.myqcloud.com/blogImage/alipay.jpg" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://shanghai-1309153523.cos.ap-shanghai.myqcloud.com/blogImage/wechatpay-qrcode.jpg"><img loading="lazy" src="https://shanghai-1309153523.cos.ap-shanghai.myqcloud.com/blogImage/wechatpay-qrcode.jpg" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>å¡è¥¿çŒ«å€’</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://meglody.github.io/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/" title="è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- æ¡†æ¶è®¾è®¡æ¦‚è§ˆ">https://meglody.github.io/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> è®¸å¯åè®®ã€‚</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E5%93%8D%E5%BA%94%E7%B3%BB%E7%BB%9F/" rel="prev" title="è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- å“åº”ç³»ç»Ÿ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">è¯»ã€ŠVue.jsè®¾è®¡ä¸å®ç°ã€‹- å“åº”ç³»ç»Ÿ</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/diary/Javascript%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E9%97%AD%E5%8C%85/" rel="next" title="Javascriptå‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…"><span class="post-nav-text">Javascriptå‡½æ•°ä½œç”¨åŸŸä¸é—­åŒ…</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/Meglody/Meglody.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div><div id="waline"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js", () => {
  const walineConfig = {"enable":true,"serverURL":"https://gh-comments-5z0r2ute3-meglody.vercel.app/","comment":true,"visitor":true,"emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/bilibili/","https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/weibo/","https://cdn.jsdelivr.net/gh/walinejs/emojis@latest/qq/"],"locale":{"placeholder":"å¡«å†™é‚®ç®±ï¼Œå¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦ï½"},"requiredMeta":["nick"],"el":"#waline","lang":"zh-CN"}
  walineConfig.path = "/read/%E8%AF%BB%E3%80%8AVue-js%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E3%80%8B-%20%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E6%A6%82%E8%A7%88/"
  walineConfig.dark = 'html[data-user-color-scheme="dark"]'
  new Waline(walineConfig)
}, window.Waline);</script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2023 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> å¡è¥¿çŒ«å€’</span></div><div class="powered"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.0</span><span class="footer-separator">|</span><span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.7.0</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a><script>const date = new Date();
const today = (date.getMonth() + 1) + "-" + date.getDate()
const mourn_days = ["5-12","12-13"]
if (mourn_days.includes(today)) {
  document.documentElement.style.filter = "grayscale(1)";
}</script></div></body></html>